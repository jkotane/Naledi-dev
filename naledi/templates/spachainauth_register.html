{% extends "naledibase.html" %}

{% block title %}Register{% endblock %}

{% block content %}
<section style="background-color: #eee;">
  <div class="container py-5">
    <div class="row">
      <div class="col-lg-8 offset-lg-2">
        <div class="card mb-4">
          <div class="card-body">
            <h3 class="text-center mb-4">Register</h3>
            <form method="POST" action="{{ url_for('spachainauth.spachainauth_register') }}">
              <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

              {{ form.hidden_tag() if form else "" }}

              <div class="mb-3">
                <label for="businessType" class="form-label">Type of Business</label>
                <select id="businessType" name="businessType" class="form-control {% if 'businessType' in missing_fields %}is-invalid{% endif %}" required>
                  <option value="" disabled {% if not registration or not registration.business_type %}selected{% endif %}>Select your business type</option>
                  <option value="Tuck Shop" {% if registration and registration.business_type == 'Tuck Shop' %}selected{% endif %}>Tuck Shop</option>
                  <option value="Butcher" {% if registration and registration.business_type == 'Butcher' %}selected{% endif %}>Butcher</option>
                  <option value="Guest House" {% if registration and registration.business_type == 'Guest House' %}selected{% endif %}>Guest House</option>
                  <option value="Home Enterprise" {% if registration and registration.business_type == 'Home Enterprise' %}selected{% endif %}>Home Enterprise</option>
                  <option value="General Dealer" {% if registration and registration.business_type == 'General Dealer' %}selected{% endif %}>General Dealer</option>
                </select>
              </div>

              <div class="row mb-3">
                <div class="col-md-6">
                  <label for="firstName" class="form-label">First Name</label>
                  <input type="text" id="firstName" name="firstName" class="form-control {% if 'firstName' in missing_fields %}is-invalid{% endif %}" value="{{ registration.first_name if registration else '' }}" required>
                </div>
                <div class="col-md-6">
                  <label for="lastName" class="form-label">Last Name</label>
                  <input type="text" id="lastName" name="lastName" class="form-control {% if 'lastName' in missing_fields %}is-invalid{% endif %}" value="{{ registration.last_name if registration else '' }}" required>
                </div>
              </div>

              <div class="row mb-3">
                <div class="col-md-6">
                  <label for="dob" class="form-label">Date of Birth</label>
                  <input type="date" id="dob" name="dob" class="form-control {% if 'dob' in missing_fields %}is-invalid{% endif %}" value="{{ registration.dob if registration and registration.dob else '' }}" required>
                </div>
                <div class="col-md-6">
                  <label class="form-label">Gender</label>
                  <div class="d-flex">
                    <div class="form-check me-3">
                      <input class="form-check-input" type="radio" name="gender" id="female" value="Female" {% if registration and registration.gender == 'Female' %}checked{% endif %} required>
                      <label class="form-check-label" for="female">Female</label>
                    </div>
                    <div class="form-check">
                      <input class="form-check-input" type="radio" name="gender" id="male" value="Male" {% if registration and registration.gender == 'Male' %}checked{% endif %} required>
                      <label class="form-check-label" for="male">Male</label>
                    </div>
                  </div>
                </div>
              </div>

              <div class="mb-3">
                <label for="citizenship" class="form-label">Citizenship</label>
                <select id="citizenship" name="citizenship" class="form-control {% if 'citizenship' in missing_fields %}is-invalid{% endif %}" required>
                  <option value="" disabled selected>Select your country</option>
                  <option value="South Africa">South Africa</option>
                  <option value="United States">United States</option>
                  <option value="United Kingdom">United Kingdom</option>
                  <option value="Zimbabwe">Zimbabwe</option>
                  <option value="Nigeria">Nigeria</option>
                </select>
              </div>

              <div class="row mb-3">
                <div class="col-md-6">
                  <label for="saId" class="form-label">South Africa Identity Number</label>
                  <input type="text" id="saId" name="saId" class="form-control {% if 'saId' in missing_fields %}is-invalid{% endif %}" value="{{ registration.id_number if registration else '' }}" required>
                </div>
                <div class="col-md-6">
                  <label for="passportNo" class="form-label">Passport Number (optional)</label>
                  <input type="text" id="passportNo" name="passportNo" class="form-control" value="{{ registration.passport_number if registration else '' }}">
                </div>
              </div>

              <div class="row mb-3">
                <div class="col-md-6">
                  <label for="streetAddress" class="form-label">Street Address</label>
                  <input type="text" id="streetAddress" name="streetAddress" class="form-control {% if 'streetAddress' in missing_fields %}is-invalid{% endif %}" value="{{ registration.streetAddress if registration else '' }}" required>
                </div>
                <div class="col-md-6">
                  <label for="address2" class="form-label">Address Line 2</label>
                  <input type="text" id="address2" name="address2" class="form-control {% if 'address2' in missing_fields %}is-invalid{% endif %}" value="{{ registration.address2 if registration else '' }}" required>
                </div>
              </div>

              <div class="row mb-3">
                <div class="col-md-6">
                  <label for="city" class="form-label">City</label>
                  <input type="text" id="city" name="city" class="form-control {% if 'city' in missing_fields %}is-invalid{% endif %}" value="{{ registration.city if registration else '' }}" required>
                </div>
                <div class="col-md-6">
                  <label for="postcode" class="form-label">Postal Code</label>
                  <input type="text" id="postcode" name="postcode" class="form-control {% if 'postcode' in missing_fields %}is-invalid{% endif %}" value="{{ registration.postcode if registration else '' }}" required>
                </div>
              </div>

              <div class="mb-3">
                <label for="province" class="form-label">Province</label>
                <select id="province" name="province" class="form-control {% if 'province' in missing_fields %}is-invalid{% endif %}" required>
                  <option value="" disabled selected>Select your province</option>
                  <option value="Eastern Cape">Eastern Cape</option>
                  <option value="Free State">Free State</option>
                  <option value="Gauteng">Gauteng</option>
                  <option value="KwaZulu-Natal">KwaZulu-Natal</option>
                  <option value="Limpopo">Limpopo</option>
                  <option value="Mpumalanga">Mpumalanga</option>
                  <option value="Northern Cape">Northern Cape</option>
                  <option value="North West">North West</option>
                  <option value="Western Cape">Western Cape</option>
                </select>
              </div>

              <div class="mb-4">
                <label for="municipality" class="form-label">Municipality</label>
                <select id="municipality" name="municipality" class="form-control {% if 'municipality' in missing_fields %}is-invalid{% endif %}" required>
                  <option value="" disabled selected>Select your municipality</option>
                </select>
              </div>

              <div class="text-end">
                <button type="submit" class="btn btn-primary btn-lg">Apply</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
</section>

<script src="{{ url_for('static', filename='js/toggleFields.js') }}"></script>
<script src="{{ url_for('static', filename='js/mncDropdown.js') }}"></script>
{% endblock %}
